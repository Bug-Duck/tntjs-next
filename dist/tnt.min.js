var TNT=function(e){"use strict";function t(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}const r=e=>{const t={};for(const n in e)t[n]="object"!=typeof n?e[n]:r(e[n]);return t},n=(e,t="")=>{try{return Function(`${t}; return ${e};`)()}catch(e){return e.toString()}},o=[],l=new WeakMap,i=(e,t)=>{for(const r in e)"object"==typeof e[r]&&(e[r]=i(e[r],t));const r=new Proxy(e,{get(e,r,n){const o=Reflect.get(e,r,n);return t.onGet(e,r,n),o},set(e,r,n,o){"object"==typeof n&&(n=i(n,t));const l=Reflect.set(e,r,n,o);return t.onSet(e,r,n,o),l},deleteProperty(e,r){const n=Reflect.deleteProperty(e,r);return t.onDeleteProperty(e,r),n}});return Array.isArray(e)&&Object.setPrototypeOf(r,Array.prototype),r},c=(e,t,r,n)=>{if(!n.length)return;let o=e.get(t);o||(o=new Map,e.set(t,o));let l=o.get(r);l||(l=new Set,o.set(r,l)),n.forEach((e=>l.add(e)))},s=(e,t,r)=>{const n=e.get(t);if(!n)return;const o=n.get(r);o&&o.forEach((e=>{e()}))},a=e=>{o.push(e),e(),o.pop()},d=e=>{const t={get value(){return c(l,t,"value",o),e},set value(r){r!==e&&(e=r,s(l,t,"value"))}};return t},h=(e,t)=>{let r=!1;return a((()=>{const o=n(e.props.cond,t);r=!!o,e.props.rendered=r.toString()})),r},p=(e,t,r,o)=>{let l=!1;const i=r.children[r.children.length-1];return!(o-1==0||!["t-if","t-elif"].includes(i.tag)||"true"===i.props.rendered)&&(a((()=>{const r=n(e.props.cond,t);l=!!r,e.props.rendered=l.toString()})),l)},u=(e,t,r,o)=>{let l=!1;const i=r.children[r.children.length-1];return!(o-1==0||!["t-if","t-elif"].includes(i.tag))&&(a((()=>{const r=n(i.props.cond,t);l=!r,e.props.rendered=l.toString()})),l)},f=e=>{let t="";return t=e.children.length?e.children[0].nodeType===Node.TEXT_NODE&&e.children[0].textContent.trim()?e.children[0].textContent:[...e.children].filter((e=>e.children.length&&e.children[0].textContent.trim())).map((e=>f(e))):[],v(e.tagName.toLowerCase(),w(e),t,e)};var g={renderers:[{renderer:(e,t)=>(a((()=>{e.children=n(e.props.data,t).toString()})),!0),name:"variableRenderer",watchTags:["v"]},{renderer:(e,t,r,n)=>{let o=null;return o="t-if"===e.tag?h:"t-elif"===e.tag?p:u,o(e,t,r,n)},name:"conditionRenderer",watchTags:["t-if","t-elif","t-else"]},{renderer:(e,t)=>{const o=e.props.data.split(" in "),l=o[0].trim(),i=n(o[1].trim(),t),c=r(e.el.children[0]);for(const r of i){const n=f(c);b(n,n.el,`const ${l} = ${JSON.stringify(r)}; ${t};`),e.children.push(n)}return!1},name:"loopRenderer",watchTags:["t-for"]}]};const v=(e,t={},r=[],n)=>({tag:e,props:t,children:r,el:n}),m=(e,t)=>{const r=e.el=document.createElement(e.tag);for(const t in e.props){const o=e.props[t];t.startsWith("on")?r.addEventListener(t.slice(2).toLowerCase(),n(o)):r.setAttribute(t,o)}if("string"==typeof e.children)return r.textContent=e.children,void t.appendChild(r);e.children.forEach((e=>{m(e,r)})),t.appendChild(r)},y=(e,t)=>{if(e.tag===t.tag){const r=t.el=e.el,n=e.props||{},o=t.props||{};for(const e in o){const t=n[e],l=o[e];l!==t&&r.setAttribute(e,l)}for(const e in n)e in o||r.removeAttribute(e);const l=e.children,i=t.children;if("string"==typeof i)return void(r.textContent=i);if("string"==typeof l)return r.innerHTML="",void i.forEach((e=>{m(e,r)}));const c=Math.min(l.length,i.length);for(let e=0;e<c;e++)y(l[e],i[e]);return i.length>l.length?void i.slice(l.length).forEach((e=>{m(e,r)})):i.length<l.length?void l.slice(i.length).forEach((e=>{r.removeChild(e.el)})):void 0}throw new Error("Replacing root elements are not supported.")},w=e=>{const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].name]=e.attributes[r].value;return t},b=(e,t,r="")=>{let n=!1;[...t.children].forEach(((t,n)=>{let o=!0,l=r;const i=v(t.tagName.toLowerCase(),w(t),[]);i.el=t,g.renderers.forEach((t=>{if(!t.watchTags.includes(i.tag))return;const r=t.renderer(i,l,e,n);if("boolean"!=typeof r){o=r.shouldRender||o;for(const e in r.injectVariables)l+=`const ${e} = ${JSON.stringify(r.injectVariables[e])};`}else o=r?o:r})),o&&b(i,t,l),e.children.push(i),"t-for"===e.tag&&console.log(e)})),e.children.length||t.childNodes.forEach((t=>{n||t.TEXT_NODE&&t.textContent.trim()&&(e.children=t.textContent,n=!0)}))};var E,T;return E=new WeakSet,T=function(e,t){e.children.length>1&&t.remove()},e.TNTApp=class{constructor(e){E.add(this);let n=!1,o=null,l=null;a((()=>{var i;const c=null!==(i=null==l?void 0:l.el)&&void 0!==i?i:e.children[0],s=v(c.tagName,w(c),[]);if(s.el=c,b(s,c),l=v(e.tagName,w(c),s.children,c),!n)return o=r(l),m(o,e),n=!0,void t(this,E,"m",T).call(this,e,c);const a=r(l);y(o,a),o=a,t(this,E,"m",T).call(this,e,c)}))}},e.computed=e=>{const t=d(null);return a((()=>t.value=e())),t},e.getTrackableObject=i,e.h=v,e.mount=m,e.patch=y,e.reactive=e=>i(e,{onGet(e,t){c(l,e,t,o)},onSet(e,t){s(l,e,t)},onDeleteProperty(){}}),e.ref=d,e.targetMap=l,e.watchEffect=a,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=tnt.min.js.map
