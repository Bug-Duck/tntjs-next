var TNT=function(e){"use strict";function t(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function r(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}const n=e=>{const t={};for(const r in e)t[r]="object"!=typeof r?e[r]:n(e[r]);return t},o=(e,t={},r=!0)=>{let n="";for(const e in t)n+=`const ${e} = ${"string"==typeof t[e]?'"'+t[e]+'"':t[e]}; `;try{const o=Function("ctx",`with(window.data) {${n}; return ${e};}`);return r?o(t):o}catch(e){return e.toString()}},i=[],s=new WeakMap,a=(e,t)=>{for(const r in e)"object"==typeof e[r]&&(e[r]=a(e[r],t));const r=new Proxy(e,{get(e,r,n){const o=Reflect.get(e,r,n);return t.onGet(e,r,n),o},set(e,r,n,o){"object"==typeof n&&(n=a(n,t));const i=Reflect.set(e,r,n,o);return t.onSet(e,r,n,o),i},deleteProperty(e,r){const n=Reflect.deleteProperty(e,r);return t.onDeleteProperty(e,r),n}});return Array.isArray(e)&&Object.setPrototypeOf(r,Array.prototype),r},c=(e,t)=>{if(!i.length)return;let r=s.get(e);r||(r=new Map,s.set(e,r));let n=r.get(t);n||(n=new Set,r.set(t,n)),i.forEach((e=>n.add(e)))},l=(e,t)=>{const r=s.get(e);if(!r)return;const n=r.get(t);n&&n.forEach((e=>{e()}))},d=e=>{i.push(e),e(),i.pop()},h=e=>a(e,{onGet(e,t){c(e,t)},onSet(e,t){l(e,t)},onDeleteProperty(){}}),u=e=>{const t={get value(){return c(t,"value"),e},set value(r){r!==e&&(e=r,l(t,"value"))}};return t},f=e=>{const t=u(null);return d((()=>t.value=e())),t},p=["t-if","t-elif"],g=["t-if","t-elif","t-else"],v=(e,t)=>{let r=!1;return d((()=>{const n=o(e.props.cond,t);r=!!n,e.props.rendered=r.toString()})),r},m=(e,t,r,n)=>{let i=!1;const s=r.children[r.children.length-1];return!(n-1==0||!p.includes(s.tag)||"true"===s.props.rendered)&&(d((()=>{const r=o(e.props.cond,t);i=!!r,e.props.rendered=i.toString()})),i)},w=(e,t,r,n)=>{let i=!1;const s=r.children[r.children.length-1];return!(n-1==0||!p.includes(s.tag))&&(d((()=>{const r=o(s.props.cond,t);i=!r,e.props.rendered=i.toString()})),i)};var y={renderers:[{renderer:(e,t)=>(d((()=>{e.children=[o(e.props.data,t).toString()]})),!0),name:"variableRenderer",shouldFire:e=>"v"===e.tag},{renderer:(e,t,r,n)=>{let o=null;return o="t-if"===e.tag?v:"t-elif"===e.tag?m:w,o(e,t,r,n)},name:"conditionRenderer",shouldFire:e=>g.includes(e.tag)},{renderer:(e,t)=>{const r=e.props.data.split(" in "),i=r[0].trim(),s=o(r[1].trim(),t),a=n(e.el.children[0]);for(const r of s){const n=M(a);C(n,n.el,Object.assign(Object.assign({},t),{[i]:r})),e.children.push(n)}return!1},name:"loopRenderer",shouldFire:e=>"t-for"===e.tag},{renderer:(e,t)=>{for(const r in e.props)r.startsWith(":")&&(r.startsWith(":on")&&console.warn("[TNT warn] Using reactive binding and event listeners at the same time will cause the program to run not as expected.","Please extract logic or remove one of the effect bindings."),e.el.removeAttribute(r),d((()=>{e.el.setAttribute(r.slice(1),o(e.props[r],t))})));return!0},name:"attributeRenderer",shouldFire(e){for(const t in e.props)if(t.startsWith(":"))return!0;return!1},fireOnMounted:!0}]};const b=(e,t={},r,n)=>({tag:e,props:t,children:r,el:n}),T=(e,t,r={})=>{const n=e.el=document.createElement(e.tag);for(const t in e.props){const i=e.props[t];t.startsWith("on")?(n.addEventListener(t.slice(2).toLowerCase(),o(i,r)),e.el.removeAttribute(t)):n.setAttribute(t,i)}return y.renderers.forEach((t=>{t.fireOnMounted&&t.shouldFire(e)&&t.renderer(e,r)})),"string"==typeof e.children?(n.textContent=e.children,void t.appendChild(n)):(e.children.forEach((e=>{"string"!=typeof e?T(e,n,r):n.appendChild(document.createTextNode(e))})),t.appendChild(n),t)},E=(e,t,r={})=>{if(e.tag===t.tag){const n=t.el=e.el,o=e.props||{},i=t.props||{};for(const e in i){const t=o[e],r=i[e];r!==t&&n.setAttribute(e,r)}for(const e in o)e in i||n.removeAttribute(e);const s=e.children,a=t.children,c=Math.min(s.length,a.length);for(let e=0;e<c;e++){const t=s[e],r=a[e];"string"!=typeof t||"string"!=typeof r?E(t,r):t!==r&&n.replaceChild(document.createTextNode(r),n.childNodes[e])}return a.length>s.length?void a.slice(s.length).forEach((e=>{"string"!=typeof e?T(e,n,r):n.appendChild(document.createTextNode(e))})):a.length<s.length?void s.slice(a.length).forEach(((e,t)=>{"string"!=typeof e?n.removeChild(e.el):n.removeChild(n.childNodes[t])})):void 0}throw new Error("Replacing root elements are not supported.")},N=e=>{const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].name]=e.attributes[r].value;return t},C=(e,t,r={})=>{[...t.childNodes].forEach(((t,n)=>{if(t.nodeType===Node.TEXT_NODE){if(!t.textContent.trim())return;return void e.children.push(t.textContent)}if(t.nodeType!==Node.ELEMENT_NODE)return;let o=!0,i=r;const s=b(t.tagName.toLowerCase(),N(t),[]);s.el=t,y.renderers.forEach((t=>{if(!t.shouldFire(s))return;const r=t.renderer(s,i,e,n);"boolean"!=typeof r?(o=r.shouldRender||o,i=Object.assign(Object.assign({},i),r.injectVariables)):o=r?o:r})),o&&C(s,t,i),e.children.push(s)}))},M=e=>b(e.tagName.toLowerCase(),N(e),[],e);var j,W,A,k,O,P,x,R,S,F,D;return W=new WeakMap,A=new WeakMap,k=new WeakMap,O=new WeakMap,P=new WeakMap,x=new WeakMap,R=new WeakMap,S=new WeakMap,j=new WeakSet,F=function(){const e=(e,r,n)=>{Array.isArray(n)&&(e.reactive[r].splice(0,e.reactive[r].length),e.reactive[r].push(...n)),l(t(this,P,"f"),r)},r={get(e,t){if("symbol"!=typeof t)return(t=t.toString())in e.reactive?e.reactive[t]:t in e.computed?e.computed[t].value:t in e.ref?e.ref[t].value:void console.warn(`[TNT warn] You accessed a value not defined (Reading '${t}').`)},set:(t,r,n)=>r in t.reactive?(e(t,r,n),!0):r in t.ref?(t.ref[r].value=n,!0):(console.warn(`[TNT warn] You set a value not defined (Reading '${r}').`),!1),has:(e,t)=>("symbol"==typeof t&&(t=t.toString()),!(t in globalThis)&&(t in e.ref||t in e.reactive||t in e.computed))};return new Proxy({reactive:t(this,W,"f"),computed:t(this,A,"f"),ref:t(this,k,"f")},r)},D=function(e,t){e.children.length>1&&t.remove()},e.TNTApp=class{constructor(){j.add(this),W.set(this,void 0),A.set(this,void 0),k.set(this,void 0),O.set(this,void 0),P.set(this,void 0),x.set(this,void 0),R.set(this,void 0),S.set(this,void 0),r(this,x,(()=>{}),"f"),r(this,R,[],"f"),r(this,A,{},"f"),r(this,W,{},"f"),r(this,k,{},"f"),r(this,S,[],"f"),r(this,P,{},"f"),window.data={}}mount(e){let r=!1,o=null,i=null;return t(this,R,"f").push("mount"),d((()=>{var s;const a=null!==(s=null==i?void 0:i.el)&&void 0!==s?s:e.children[0],c=b(a.tagName,N(a),[]);if(c.el=a,C(c,a,{}),i=b(e.tagName,N(a),c.children,a),!r)return o=n(i),T(o,e,{}),r=!0,t(this,j,"m",D).call(this,e,a),void t(this,x,"f").call(this,this);const l=n(i);E(o,l,{}),o=n(l),t(this,j,"m",D).call(this,e,a)})),this}get data(){return t(this,O,"f")}useData(e){t(this,R,"f").push("data"),r(this,P,n(e),"f"),r(this,W,{},"f"),r(this,k,{},"f");for(const r in e)"object"!=typeof e[r]?t(this,k,"f")[r]=u(e[r]):t(this,W,"f")[r]=h(e[r]);return r(this,O,t(this,j,"m",F).call(this),"f"),window.data=t(this,O,"f"),this}useComputed(e){t(this,R,"f").push("computed"),t(this,R,"f").includes("data")||console.warn("[TNT warn] useComputed() hook is called before useData(). Any reactive data accessed from computed functions will not be accessable.","This may lead to unpredictable results or errors.");for(const r in e)t(this,A,"f")[r]=f(e[r]);return r(this,O,t(this,j,"m",F).call(this),"f"),window.data=t(this,O,"f"),this}useEffect(e){return t(this,R,"f").push("effect"),t(this,S,"f").push(e),d(e),this}onMounted(e){return r(this,x,e,"f"),this}},e.computed=f,e.getTrackableObject=a,e.h=b,e.mount=T,e.patch=E,e.reactive=h,e.ref=u,e.targetMap=s,e.watchEffect=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=tnt.min.js.map
