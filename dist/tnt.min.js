var TNT=function(e){"use strict";function t(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}const r=e=>{const t={};for(const n in e)t[n]="object"!=typeof n?e[n]:r(e[n]);return t},n=(e,t="")=>{try{return Function(`${t}; return ${e};`)()}catch(e){return e.toString()}},o=[],l=new WeakMap,c=(e,t)=>{for(const r in e)"object"==typeof e[r]&&(e[r]=c(e[r],t));const r=new Proxy(e,{get(e,r,n){const o=Reflect.get(e,r,n);return t.onGet(e,r,n),o},set(e,r,n,o){"object"==typeof n&&(n=c(n,t));const l=Reflect.set(e,r,n,o);return t.onSet(e,r,n,o),l},deleteProperty(e,r){const n=Reflect.deleteProperty(e,r);return t.onDeleteProperty(e,r),n}});return Array.isArray(e)&&Object.setPrototypeOf(r,Array.prototype),r},i=(e,t)=>{if(!o.length)return;let r=l.get(e);r||(r=new Map,l.set(e,r));let n=r.get(t);n||(n=new Set,r.set(t,n)),o.forEach((e=>n.add(e)))},s=(e,t)=>{const r=l.get(e);if(!r)return;const n=r.get(t);n&&n.forEach((e=>{e()}))},a=e=>{o.push(e),e(),o.pop()},d=e=>{const t={get value(){return i(t,"value"),e},set value(r){r!==e&&(e=r,s(t,"value"))}};return t},h=["t-if","t-elif"],p=(e,t)=>{let r=!1;return a((()=>{const o=n(e.props.cond,t);r=!!o,e.props.rendered=r.toString()})),r},u=(e,t,r,o)=>{let l=!1;const c=r.children[r.children.length-1];return!(o-1==0||!h.includes(c.tag)||"true"===c.props.rendered)&&(a((()=>{const r=n(e.props.cond,t);l=!!r,e.props.rendered=l.toString()})),l)},f=(e,t,r,o)=>{let l=!1;const c=r.children[r.children.length-1];return!(o-1==0||!h.includes(c.tag))&&(a((()=>{const r=n(c.props.cond,t);l=!r,e.props.rendered=l.toString()})),l)};var g={renderers:[{renderer:(e,t)=>(a((()=>{e.children=n(e.props.data,t).toString()})),!0),name:"variableRenderer",watchTags:["v"]},{renderer:(e,t,r,n)=>{let o=null;return o="t-if"===e.tag?p:"t-elif"===e.tag?u:f,o(e,t,r,n)},name:"conditionRenderer",watchTags:["t-if","t-elif","t-else"]},{renderer:(e,t)=>{const o=e.props.data.split(" in "),l=o[0].trim(),c=n(o[1].trim(),t),i=r(e.el.children[0]);for(const r of c){const n=E(i);b(n,n.el,`const ${l} = ${JSON.stringify(r)}; ${t};`),e.children.push(n)}return!1},name:"loopRenderer",watchTags:["t-for"]}]};const m=(e,t={},r=[],n)=>({tag:e,props:t,children:r,el:n}),v=(e,t)=>{const r=e.el=document.createElement(e.tag);for(const t in e.props){const o=e.props[t];t.startsWith("on")?r.addEventListener(t.slice(2).toLowerCase(),n(o)):r.setAttribute(t,o)}return"string"==typeof e.children?(r.textContent=e.children,void t.appendChild(r)):(e.children.forEach((e=>{v(e,r)})),t.appendChild(r),t)},y=(e,t)=>{if(e.tag===t.tag){const r=t.el=e.el,n=e.props||{},o=t.props||{};for(const e in o){const t=n[e],l=o[e];l!==t&&r.setAttribute(e,l)}for(const e in n)e in o||r.removeAttribute(e);const l=e.children,c=t.children;if("string"==typeof c)return void(r.textContent=c);if("string"==typeof l)return r.innerHTML="",void c.forEach((e=>{v(e,r)}));const i=Math.min(l.length,c.length);for(let e=0;e<i;e++)y(l[e],c[e]);return c.length>l.length?void c.slice(l.length).forEach((e=>{v(e,r)})):c.length<l.length?void l.slice(c.length).forEach((e=>{r.removeChild(e.el)})):void 0}throw new Error("Replacing root elements are not supported.")},w=e=>{const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].name]=e.attributes[r].value;return t},b=(e,t,r="")=>{let n=!1;[...t.children].forEach(((t,n)=>{let o=!0,l=r;const c=m(t.tagName.toLowerCase(),w(t),[]);c.el=t,g.renderers.forEach((t=>{if(!t.watchTags.includes(c.tag))return;const r=t.renderer(c,l,e,n);if("boolean"!=typeof r){o=r.shouldRender||o;for(const e in r.injectVariables)l+=`const ${e} = ${JSON.stringify(r.injectVariables[e])};`}else o=r?o:r})),o&&b(c,t,l),e.children.push(c),"t-for"===e.tag&&console.log(e)})),e.children.length||t.childNodes.forEach((t=>{n||t.TEXT_NODE&&t.textContent.trim()&&(e.children=t.textContent,n=!0)}))},E=e=>{let t="";return t=e.children.length?e.children[0].nodeType===Node.TEXT_NODE&&e.children[0].textContent.trim()?e.children[0].textContent:[...e.children].filter((e=>e.children.length&&e.children[0].textContent.trim())).map((e=>E(e))):[],m(e.tagName.toLowerCase(),w(e),t,e)};var T,C;return T=new WeakSet,C=function(e,t){e.children.length>1&&t.remove()},e.TNTApp=class{constructor(){T.add(this)}mount(e){let n=!1,o=null,l=null;a((()=>{var c;const i=null!==(c=null==l?void 0:l.el)&&void 0!==c?c:e.children[0],s=m(i.tagName,w(i),[]);if(s.el=i,b(s,i),l=m(e.tagName,w(i),s.children,i),!n)return o=r(l),v(o,e),n=!0,void t(this,T,"m",C).call(this,e,i);const a=r(l);y(o,a),o=a,t(this,T,"m",C).call(this,e,i)}))}},e.computed=e=>{const t=d(null);return a((()=>t.value=e())),t},e.getTrackableObject=c,e.h=m,e.mount=v,e.patch=y,e.reactive=e=>c(e,{onGet(e,t){i(e,t)},onSet(e,t){s(e,t)},onDeleteProperty(){}}),e.ref=d,e.targetMap=l,e.watchEffect=a,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=tnt.min.js.map
